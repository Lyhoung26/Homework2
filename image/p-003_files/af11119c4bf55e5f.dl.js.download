"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7963],{97963:(e,o,r)=>{r.d(o,{"t1":()=>t,"_n":()=>n,"Sf":()=>s,"kF":()=>se});var t={};r.r(t),r.d(t,{"logToAnalytics":()=>_});var n={};r.r(n),r.d(n,{"fetchCreateOnlineAccount":()=>z,"fetchCreateOnlineAccountError":()=>Y,"fetchCreateOnlineAccountSuccess":()=>j,"fetchFindCustomer":()=>F,"fetchFindCustomerError":()=>x,"fetchFindCustomerSuccess":()=>Z,"fetchSendVerificationCode":()=>R,"fetchSendVerificationCodeError":()=>L,"fetchSendVerificationCodeSuccess":()=>G,"fetchVerifyCode":()=>W,"fetchVerifyCodeError":()=>q,"fetchVerifyCodeSuccess":()=>H});var s={};r.r(s),r.d(s,{"closeUnknownUserModal":()=>ce,"loadInitialState":()=>se,"loadInitialStateSuccess":()=>ie,"onDisplayAccountCheckComponent":()=>re,"onRedirectFromCheckoutSignInForm":()=>ne,"onRedirectToCheckoutSignInForm":()=>te,"openUnknownUserModal":()=>ae});var i=r(19865);const a="engagement/account/customer-profile/",c="analytics_log/",d="_error",p="_success",u=a+c+"click_stream_analytics",l=a+c+"find_customer",h=l+p,g=l+d,S=a+c+"send_verification_code",f=S+p,I=S+d,m=a+c+"verify_code",C=m+p,y=m+d,v=a+c+"create_online_account",w=v+p,k=v+d,_=(0,i.Z)(u),E=a+"find_customer",A=E+p,T=E+d,N=a+"send_verification_code",P=N+p,b=N+d,D=a+"verify_code",O=D+p,U=D+d,V=a+"create_online_account",B=V+p,M=V+d,F=(0,i.Z)(E),Z=(0,i.Z)(A),x=(0,i.Z)(T),R=(0,i.Z)(N),G=(0,i.Z)(P),L=(0,i.Z)(b),W=(0,i.Z)(D),H=(0,i.Z)(O),q=(0,i.Z)(U),z=(0,i.Z)(V),j=(0,i.Z)(B),Y=(0,i.Z)(M),X=a+"display_account_check_component",J=a+"customer_profile_load_initial_state",K=J+p,Q=a+"open_unknown_user_modal",$=a+"close_unknown_user_modal",ee=a+"redirect_to_checkout_sign_in_form",oe=a+"redirect_from_checkout_sign_in_form",re=(0,i.Z)(X),te=(0,i.Z)(ee),ne=(0,i.Z)(oe),se=(0,i.Z)(J,null,(()=>({track:!0}))),ie=(0,i.Z)(K),ae=(0,i.Z)(Q),ce=(0,i.Z)($);var de=r(95550),pe=r(57969),ue=r(67546),le=r.n(ue),he=r(46186),ge=r.n(he),Se=r(67882),fe=r.n(Se),Ie=r(90576),me=r.n(Ie);const Ce="UNAUTHORIZED",ye="HIT_A_SNAG",ve={"ICON-VRF-100":"WRONG_CODE"},we="SIGNUP_MULTIBRAND_EXPERIENCE",ke="SIGNUP",_e="SIGNIN_MULTIBRAND_EXPERIENCE",Ee="SIGNIN",Ae="VERIFY_OWNERSHIP",Te={"OCP-100":we,"OCP-101":ke,"OCP-200":_e,"OCP-201":Ee,"OCP-300":Ae};function Ne(e){const o={400:ye,401:Ce,500:ye,502:ye},{status:r,iconCode:t}=e;return t&&me()(ve,t)?fe()(ve,t,ye):fe()(o,r,ye)}const Pe={[E]:e=>ge()({},e,{errorState:{findCustomer:{bannerErrorCode:null}},fetching:{fetchingCustomerAccount:!0}}),[A]:(e,o)=>{const r=function(e,o){const{code:r=null,isAnniversaryUSEarlyAccess:t,isAnniversaryCAEarlyAccess:n,isAccountCheckModal:s}=o,i=fe()(e,"view",""),a="credit-sign-in"===i||"credit-create-account"===i||"credit-create-online-account"===i,c=Te[r],d=c===Ae;let p=!1,u="",l=Ee;return d&&(u=a?"/signup/cardmember/verify":"/signup/verify",p=!0,l=Ae),(c===ke||c===we)&&(p=!0,u=t||n?"/signup/anniversary":a?"/signup/cardmember":"/signup",l=ke),s&&(p=!1),{isMultiBrand:c===_e||c===we,componentView:l,shouldRedirectUser:p,routePath:u,verifyOwnership:d}}(e.logging,o.payload),t=fe()(o.payload,"suppressCreateAccount",!1),{hasVerifiedMobile:n=!1,isCheckoutView:s=!1}=o.payload||{},i=!n&&s;return function(e={},o={},r=!1){const t=fe()(e,"code",""),n="OCP-100"===t||"OCP-101"===t||"OCP-300"===t,s=fe()(o,"componentView",""),i=s.includes(ke)||s.includes(Ae);return r&&n&&i}(o.payload,r,t)?ge()({},e,{findCustomer:{...o.payload},fetching:{fetchingCustomerAccount:!1},isUnknownUserModalVisible:!0,showAccountCheckComponent:!0}):ge()({},e,{findCustomer:{...o.payload},fetching:{fetchingCustomerAccount:!1},isMultiBrand:r.isMultiBrand,componentView:r.componentView,showAccountCheckComponent:!1,shouldRedirectUser:r.shouldRedirectUser,routePath:r.routePath,redirectToGuestCheckoutSignInForm:i})},[T]:(e,o)=>{const r=Ne(o.payload);return ge()({},e,{fetching:{fetchingCustomerAccount:!1},errorState:{findCustomer:{bannerErrorCode:r}}})}},be={[N]:e=>ge()({},e,{errorState:{sendVerificationCode:{bannerErrorCode:null}},fetching:{fetchingSendVerificationCode:!0}}),[P]:(e,o)=>ge()({},e,{sendVerificationCode:{...o.payload},fetching:{fetchingSendVerificationCode:!1}}),[b]:(e,o)=>{const r=Ne(o.payload);return ge()({},e,{fetching:{fetchingSendVerificationCode:!1},errorState:{sendVerificationCode:{bannerErrorCode:r}}})}},De={[D]:e=>ge()({},e,{errorState:{verifyCode:{bannerErrorCode:null}},fetching:{fetchingVerifyCode:!0}}),[O]:(e,o)=>ge()({},e,{verifyCode:{...o.payload},fetching:{fetchingVerifyCode:!1}}),[U]:(e,o)=>{const r=Ne(o.payload);return ge()({},e,{fetching:{fetchingVerifyCode:!1},errorState:{verifyCode:{bannerErrorCode:r}}})}},Oe={[V]:e=>ge()({},e,{errorState:{createOnlineAccount:{bannerErrorCode:null}},fetching:{fetchingCreateOnlineAccount:!0}}),[B]:(e,o)=>ge()({},e,{createOnlineAccount:{...o.payload},fetching:{fetchingCreateOnlineAccount:!1}}),[M]:(e,o)=>{const r=Ne(o.payload);return ge()({},e,{fetching:{fetchingCreateOnlineAccount:!1},errorState:{createOnlineAccount:{bannerErrorCode:r}}})}},Ue={[X]:(e,o)=>le()({},e,{findCustomer:{...o.payload},showAccountCheckComponent:!0,redirectToGuestCheckoutSignInForm:!1})},Ve={isAccountCheckFlow:!1,errorState:{findCustomer:{bannerErrorCode:null},sendVerificationCode:{bannerErrrorCode:null},verifyCode:{bannerErrrorCode:null},ceateOnlineAccount:{bannerErrorCode:null}},fetching:{fetchingCustomerAccount:!1,fetchingSendVerificationCode:!1,fetchingVerifyCode:!1,fetchingCreateOnlineAccount:!1},logging:{team:"",view:""},isMultiBrand:!1,componentView:"SIGNIN",showAccountCheckComponent:!1,showVerifyOwnershipComponent:!1,shouldRedirectUser:!1,routePath:"",redirectToGuestCheckoutSignInForm:!1,isUnknownUserModalVisible:!1},Be={[K]:(e,o)=>{const{configuredInitialState:r}=o.payload;return le()({},Ve,r)}},Me={[Q]:e=>({...e,isUnknownUserModalVisible:!0}),[$]:e=>({...e,isUnknownUserModalVisible:!1})},Fe={[ee]:e=>({...e,redirectToGuestCheckoutSignInForm:!0})},Ze={[oe]:e=>({...e,redirectToGuestCheckoutSignInForm:!1})},xe=le()(Be,Ue,Fe,Ze,Me),Re=le()(Pe,be,De,Oe),Ge=(0,pe.Z)(le()(Re,xe),Ve);de.u.add({customerProfile:Ge});function Le({status:e=500}){return{status:e,message:"Create Online Account Exception"}}var We=r(48714),He=r(2284),qe=r(13186),ze=r.n(qe),je=r(37693),Ye=r.n(je);const Xe={failedToGetForterToken:function(){},failedToCheckForterTokenExists:function(){}};function Je({isProduction:e,logger:o=Xe,preSignInShopperId:r}){try{const t=new He.Z({isProd:e});t.loadFromBrowser();const n=t.getData().forterToken;return Ye()(n)?(o.hasEmptyForterToken({preSignInShopperId:r}),""):ze()(n,"_")[0]}catch(t){return o.failedToGetForterToken(t,{preSignInShopperId:r}),""}}var Ke=r(85208);var Qe=r(95509);class $e{constructor(e){this.Accept="application/json",this["Content-Type"]="application/json",this["Nord-Api-Version"]="1.0",this["Nord-Request-Id"]=(0,We.Z)(),this["Nord-Source-Channel"]="FULL_LINE",this["Nord-Brand-Code"]="NCOM",this.newrelic=(0,We.Z)(),this["Nord-Source-Platform"]=e?"MOW":"WEB",this["X-Nor-Scope"]=e?"MobileRegistered":"WebRegistered"}setCookieHeaders(e){return this["X-Nor-Appiid"]=Je(e),this["Nord-Session-Id"]=function({isProduction:e}){const o={isProd:e},r=new Ke.Z(o);return r.loadFromBrowser(),r.getData().SessionId}(e),this}setProxyAccessToken(e){return this["Ocp-Access-Token"]="Bearer "+e,this}setAuthorization(e){return this.Authorization="Bearer "+e,this}setLoadTest(e){return this["Nord-Load"]=e,this}setClientIds(e){return this["Nord-Client-Ids"]=e,this}setUserId(e){return this.UserId=e,this["X-Nor-Clientid"]=(0,Qe.i)(e),this}setShopperId(e){return this.ShopperId=e,this}build(){return this}}const eo="info";class oo{constructor({actionName:e,logger:o,logging:r,sessionId:t}){this.logger=o,this.sharedData={category:"Sign In Component",methodName:e,logging:r,sessionId:t,team:r.team,view:r.view}}request(e,o){const r={apiVersion:e["Nord-Api-Version"],clientId:e["Nord-Client-Id"],hasShopperId:fe()(e,"ShopperId","").length>10,message:"request to service",requestId:e["Nord-Request-Id"],url:o,...this.sharedData};return this.logger.logEvent(eo,r),r}response(e,o){const r={message:"response from service",status:e,timeTakenInMSec:o,...this.sharedData};return this.logger.logEvent(eo,r),r}event(e,o){const r={desc:e,value:o,...this.sharedData};return this.logger.logEvent(eo,r),r}error(e,o,{preSignInShopperId:r}){this.logger.logError(e,{message:o,preSignInShopperId:r,status:e.status||500,responseError:e,...this.sharedData})}preAuthError({error:e,isUsingConflictExperience:o,preSignInShopperId:r}){this.logger.logError(e,{category:"register",componentName:"register",isUsingConflictExperience:o,message:"failed to create account because pre-auth retry failed",methodName:"create-account",team:"account",preSignInShopperId:r,view:this.sharedData.view})}failedToCheckForterToken(e){this.logger.logError(e,{message:"failed to check forter token exists",...this.sharedData})}failedToGetForterToken(e,{preSignInShopperId:o,postSignInShopperId:r}){const t={message:"failed to get forter token",preSignInShopperId:o,postSignInShopperId:r,...this.sharedData};return this.logger.logError(e,t),t}failedToGetShopperId(e,{preSignInShopperId:o,postSignInShopperId:r}){const t={message:"failed to get shopper id",preSignInShopperId:o,postSignInShopperId:r,...this.sharedData};return this.logger.logError(e,t),t}failedToGetShopperToken(e,{preSignInShopperId:o,postSignInShopperId:r}){const t={message:"failed to get shopper token",preSignInShopperId:o,postSignInShopperId:r,view:this.sharedData.view};return this.logger.logError(e,t),t}failedToRemoveSslRefreshCookie(e,{shopperId:o}){const r={message:"failed to remove ssl refresh cookie",shopperId:o,...this.sharedData};return this.logger.logError(e,r),r}failedToSaveShopperId(e,{preSignInShopperId:o,postSignInShopperId:r}){const t={message:"failed to save shopper id",preSignInShopperId:o,postSignInShopperId:r,...this.sharedData};return this.logger.logError(e,t),t}failedToSaveSslBearerToken(e,{preSignInShopperId:o,postSignInShopperId:r}){const t={message:"failed to save ssl bearer token",preSignInShopperId:o,postSignInShopperId:r,...this.sharedData};return this.logger.logError(e,t),t}hasEmptyForterToken({preSignInShopperId:e,postSignInShopperId:o}){const r={message:"has empty forter token",preSignInShopperId:e,postSignInShopperId:o,...this.sharedData};return this.logger.logEvent(eo,r),r}}var ro=r(42404),to=r(3065),no=r(31854);const so=function(e,o,r,t){const{configuration:{history:n}={},team:s="",view:i="",env:a}=e.payload;o(ie({configuredInitialState:{history:n,isAccountCheckFlow:!0,showAccountCheckComponent:!0,logging:{env:a,team:s,view:i}}}))},io=(e,o)=>{const r={type:"engagement/myaccount/analytics",meta:{track:!0},payload:{...e,platform:"MOW/Desktop"}};return o&&(e=>{const{action_name:o,...r}=e;console.info("%c %s","background: #363636; color: #bada55","Dispatch analytic action: ",{action:o,...r})})(r.payload),r},ao=(e,o,r,t="")=>{const{environment:{isDevelopment:n}}=r(),{actionName:s}=e.payload,i={category:"customer_profile",view:t};switch(s){case h:o(io({action_name:"find_customer",label:"success",...i},n));break;case g:o(io({action_name:"find_customer",label:"error",...i},n))}};var co=r(30299),po=r.n(co),uo=r(48108);var lo=r(32298),ho=r(20253),go=r.n(ho);var So=r(28093),fo=r(4608);var Io=r(40816);var mo=r(19998),Co=r(37843);async function yo(e,o,r,t){const{isRetry:n=!1,password:s,code:i,verifier:a,onSuccess:c=po(),onFailure:d=po()}=e.payload,{customerProfile:{findCustomer:{email:p,ocpAccessToken:u},verifyCode:{customerId:l},logging:h},environment:{isMobileDevice:g,isProduction:S},shopper:{SessionId:f,Id:I}}=r(),{view:m}=h,{fetch:C,logger:y}=t,v={logging:h,loggerCategory:"Verify Ownership Component"},E={getState:r,helpers:t,dispatch:o},A=new oo({actionName:"create_online_account",logger:y,logging:h,sessionId:f}),{preAuthorize:T,authorizeCompleteCustomerProfile:N}=Co._n;if(!i||!a){if(n){const e="Pre-authorization failure";A.preAuthError({error:{message:e},preSignInShopperId:I}),o(Y({message:e})),o(_({actionName:k})),d({message:e})}else{const r=()=>o(z({...e.payload,isRetry:!0}));o(T({onFailure:r,onSuccess:r}))}return}const P=new $e(g).setUserId(m).build();let b,D;try{const e={code:i,verifier:a,userRegistrationInfo:{email:p,password:s}},{status:o,accessToken:r,tempBrandId:t}=await(0,mo.Z)({platformHelpers:E,headers:P,loggingContext:v,payload:e});if(202!==o)throw Le({status:o});b=r,D=t}catch(B){const{status:e,message:r}=B;return A.error(B,"authorize failed to create online account",{preSignInShopperId:I}),o(Y({status:e,message:r})),o(_({actionName:k})),void d(B)}const O=(0,ro.UN)(r())+"customers/"+l,U={credentials:"include",method:"POST",headers:new $e(g).setUserId(m).setProxyAccessToken(u).setAuthorization(b).setCookieHeaders({isProduction:S,preSignInShopperId:I,logger:A}).build(),body:JSON.stringify({tempBrandId:D,email:p})};A.request(U.headers,A);const V=Date.now();return C(O+"?source=WEB&subsource=WEB_MYACCOUNT",U).then((async e=>{const{status:o}=e,r=200===o,t=Date.now()-V;if(A.response(o,t,{}),r){return{status:o,payload:{...await e.json()}}}throw Le({status:o})})).then((async e=>{const{accessToken:r,expiresIn:t,brandId:n,shopperToken:s,profile:i}=e.payload,a={isProduction:S,logger:A,preSignInShopperId:I,postSignInShopperId:n},d=fe()(i,"programs.MTLYLTY"),p=fe()(i,"mobile"),u=fe()(i,"firstName");d&&!p&&o(N()),function({isProduction:e,logger:o,postSignInShopperId:r}){try{new Io.Z({isProd:e}).removeFromBrowser()}catch(B){o.failedToRemoveSslRefreshCookie(B,{postSignInShopperId:r})}}(a),function(e,o,r){const{isProduction:t,logger:n,preSignInShopperId:s,postSignInShopperId:i}=r;try{const r=new So.Z({isProd:t,expires:o});r.setData({bearer:e}),r.saveToBrowser()}catch(B){n.failedToSaveSslBearerToken(B,{preSignInShopperId:s,postSignInShopperId:i})}}(r,t,a),function(e,o){const{isProduction:r,logger:t,preSignInShopperId:n,postSignInShopperId:s}=o;try{const o=Date.now()+1e3*e,t=new fo.Z({isProd:r,expiresDate:o});t.setData({expiration:o}),t.saveToBrowser()}catch(B){t.failedToSaveSslBearerExpiration(B,{preSignInShopperId:n,postSignInShopperId:s})}}(t,a),function(e){const{isProduction:o,logger:r,preSignInShopperId:t,postSignInShopperId:n}=e;try{const e=new uo.Z({isProd:o});e.loadFromBrowser(),e.setData({shopperid:n}),e.saveToBrowser()}catch(B){r.failedToSaveShopperId(B,{preSignInShopperId:t,postSignInShopperId:n})}}(a);const h=function(e){const{isProduction:o,logger:r,preSignInShopperId:t,postSignInShopperId:n}=e;try{const e=new lo.Z({isProd:o});e.loadFromBrowser();const{shopperToken:r}=e.getData();return r}catch(B){return r.failedToGetShopperToken(B,{preSignInShopperId:t,postSignInShopperId:n}),""}}(a);!function(e,{isProduction:o,logger:r}){try{if(go()(e))return null;const r=new lo.Z({isProd:o});return r.loadFromBrowser(),r.setData({shopperToken:e}),r.saveToBrowser(),null}catch(B){return r.failedToSaveShopperToken(B),null}}(s,a);const{mergeShoppingBag:g}=Co._n,f={onSuccess:()=>{o(j({status:200})),o(_({actionName:w})),c()},onFailure:e=>{throw Le({status:500})},firstName:u,ocpId:l,preSignInShopperId:I,preSignInShopperToken:h,postSignInShopperId:n};o(g(f))})).catch((e=>{const r=e.status||500,t=e.message;A.error(e,"failed to create an account from store profile",{preSignInShopperId:I}),o(Y({status:r,message:t})),o(_({actionName:k})),d({message:t})}))}const vo=(e,o,r,t)=>{const{signInComponent:{logging:{view:n}}}=r();switch(e.type){case E:return function(e,o,r,t){const{email:n,isAccountCheckModal:s=!1,isCheckoutView:i=!1,suppressCreateAccount:a=!1}=e.payload,c=r(),{customerProfile:d,environment:{isProduction:p,isMobileDevice:u},experiments:{optimizely:{experiments:l,id:S}},featureFlags:{isAnniversaryUSEarlyAccess:f,isAnniversaryCAEarlyAccess:I,useShapePSIHeader:m},shopper:{SessionId:C,Id:y},signInComponent:{logging:v}}=c,{fetch:w,logger:k,businessEventLogger:E}=t,A=fe()(d,"logging.view",""),T=l.find((e=>"cam_persistent_sign_in_autocheck"===e.n));T&&E.logBusinessEvent({clientId:"mwp",eventTime:Date.now(),eventType:"com.nordstrom.customer.event.ExperimentVariationExposed"},{bucketingId:S,experimentName:T.n,variationName:T.v,projectName:T.p,customer:no.Z.selectEventCustomer(c),source:no.Z.selectEventSource(c)});const N=new oo({actionName:"find_customer",logger:k,logging:v,sessionId:C}),P=(0,ro.UN)(r())+"customers/find",b={credentials:"include",method:"POST",headers:new $e(u).setUserId(A).setCookieHeaders({isProduction:p,preSignInShopperId:y,logger:N}).build(),body:JSON.stringify({email:n})};N.request(b.headers,P);const D=Date.now();return w(P,b).then((e=>{const{status:o}=e,r=200===o,t=Date.now()-D;N.response(o,t,{});const n=e.headers.get("nord-device-category");N.event("Shape Decision",n);const s=!("1"!==n||!m||!T||"enabled"!==T.v);if(s&&N.event("Check PSI Checkbox",s),r)return e.json().then((o=>({status:e.status,payload:o,shouldCheckPSICheckbox:s})));throw function({status:e=500}){return{status:e,message:"Find Customer Exception"}}({status:o})})).then((e=>{const{payload:r,shouldCheckPSICheckbox:t}=e,c=r.migrationMetadata?.groupType;(0,to.Eh)({groupType:c||""});const d=Boolean(r.jwnWithTcId);(0,to.ad)({isMultiBrandedExperience:d}),c&&N.event("Migration Metadata",{...r.migrationMetadata}),N.event("OCP Response Code",{"OCP-code":r.code,isMultiBrandedExperience:d}),o(Z({...r,email:n,isAccountCheckModal:s,isCheckoutView:i,isProduction:p,isAnniversaryUSEarlyAccess:f,isAnniversaryCAEarlyAccess:I,shouldCheckPSICheckbox:t,suppressCreateAccount:a})),o(_({actionName:h}))})).catch((e=>{const r=e.status||500;N.error(e,"failed to find customer by email",{preSignInShopperId:y}),o(x({status:r})),o(_({actionName:g}))}))}(e,o,r,t);case N:return function(e,o,r,t){const{deliveryMethod:n,value:s,firstName:i}=e.payload,{customerProfile:a,environment:{isMobileDevice:c},shopper:d,signInComponent:{logging:p}}=r(),{fetch:u,logger:l}=t,h=d.SessionId||"",g=fe()(a,"findCustomer.ocpAccessToken"),S=fe()(a,"logging.view",""),m=new oo({actionName:"send_verification_code",logger:l,logging:p,sessionId:h}),C=(0,ro.UN)(r())+"customers/verify",y={credentials:"include",method:"POST",headers:new $e(c).setProxyAccessToken(g).setUserId(S).build(),body:JSON.stringify({type:n,value:s,messageType:"WEB",placeHolder:{FirstName:i}})};m.request(y.headers,C);const v=Date.now();return u(C+"?source=WEB&subsource=WEB_MYACCOUNT",y).then((e=>{const{status:o}=e,r=200===o||201===o,t=Date.now()-v;if(m.response(o,t,{}),r)return{status:o};throw function({status:e=500}){return{status:e,message:"Send Verification Code Exception"}}({status:o})})).then((e=>{const{status:r}=e;o(G({status:r})),o(_({actionName:f}))})).catch((e=>{const r=e.status||500;m.error(e,"failed to send verification code",{preSignInShopperId:d.Id}),o(L({status:r})),o(_({actionName:I}))}))}(e,o,r,t);case D:return function(e,o,r,t){const{deliveryMethod:n,value:s,code:i}=e.payload,{customerProfile:a,environment:{isMobileDevice:c},shopper:d,signInComponent:{logging:p}}=r(),{fetch:u,logger:l}=t,h=d.SessionId||"",g=fe()(a,"logging.view",""),S=fe()(a,"findCustomer.ocpAccessToken"),f=new oo({actionName:"verify_code",logger:l,logging:p,sessionId:h}),I=(0,ro.UN)(r())+"customers/verify/code",m={credentials:"include",method:"POST",headers:new $e(c).setProxyAccessToken(S).setUserId(g).build(),body:JSON.stringify({type:n,value:s,code:i})};f.request(m.headers,f);const v=Date.now();return u(I+"?source=WEB&subsource=WEB_MYACCOUNT",m).then((async e=>({status:e.status,payload:{...await e.json()}}))).then((e=>{const{status:o}=e,r=200===o,t=Date.now()-v;if(f.response(o,t,{}),r)return{status:o,customerId:e.payload.customerId};{const r=e.payload?.messages?.[0]?.errorCode;throw function({iconCode:e,status:o=500}){return{status:o,message:"Verify Code Exception",iconCode:e}}({status:o,iconCode:r})}})).then((e=>{const{status:r,customerId:t}=e;o(H({status:r,customerId:t})),o(_({actionName:C}))})).catch((e=>{const r=e.status||500,t=e.message,n=e.iconCode;f.error(e,"failed to verify code"),o(q({status:r,message:t,iconCode:n})),o(_({actionName:y}))}))}(e,o,r,t);case V:return yo(e,o,r,t);case J:return so(e,o,r,t);case u:return ao(e,o,r,n);default:return null}};de.h.add({customerProfile:vo})}}]);